/*
 * jQuery Watermark plugin
 * Version 1.3.1 (23-MAR-2012)
 * @requires jQuery v1.3 or later
 *
 * Examples at: http://mario.ec/static/jq-watermark/
 * Copyright (c) 2010 Mario Estrada
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/mit-license.php
 *
 */
(function(c){var a=c.browser.msie&&c.browser.version<8;var b=4;c.watermarker=function(){};c.extend(c.watermarker,{defaults:{color:"#999",left:0,top:0,fallback:false,animDuration:300,minOpacity:0.6},setDefaults:function(d){c.extend(c.watermarker.defaults,d)},checkVal:function(f,e,d){if(f.length==0){c(e).show()}else{c(e).hide()}return f.length>0},html5_support:function(){var d=document.createElement("input");return"placeholder" in d}});c.fn.watermark=function(f,e){var e,d;e=c.extend(c.watermarker.defaults,e);d=this.filter("textarea, input:not(:checkbox,:radio,:file,:submit,:reset)");if(e.fallback&&c.watermarker.html5_support()){return this}d.each(function(){var g,q,j,n,k;var l,i,m,h=0,p,o;g=c(this);if(g.attr("data-jq-watermark")=="processed"){return}q=g.attr("placeholder")!=undefined&&g.attr("placeholder")!=""?"placeholder":"title";j=f===undefined||f===""?c(this).attr(q):f;n=c('<span class="watermark_container"></span>');k=c('<span class="watermark">'+j+"</span>");if(q=="placeholder"){g.removeAttr("placeholder")}n.css({display:"block",position:"relative"});if(g.attr("data-percent-width")=="true"){n.css("width","100%")}if(g.attr("data-percent-height")=="true"){n.css("height","100%")}if(a){n.css({zoom:1,display:"inline"})}g.wrap(n).attr("data-jq-watermark","processed");if(this.nodeName.toLowerCase()=="textarea"){e_height=g.css("line-height");e_height=e_height==="normal"?parseInt(g.css("font-size")):e_height;h=(g.css("padding-top")!="auto"?parseInt(g.css("padding-top")):0)}else{e_height=g.outerHeight();if(e_height<=0){e_height=(g.css("padding-top")!="auto"?parseInt(g.css("padding-top")):0);e_height+=(g.css("padding-bottom")!="auto"?parseInt(g.css("padding-bottom")):0);e_height+=(g.css("height")!="auto"?parseInt(g.css("height")):0)}}h+=(g.css("margin-top")!="auto"?parseInt(g.css("margin-top")):0);l=g.css("margin-left")!="auto"?parseInt(g.css("margin-left")):0;l+=g.css("padding-left")!="auto"?parseInt(g.css("padding-left")):0;k.css({position:"absolute",display:"block",fontFamily:g.css("font-family"),fontSize:g.css("font-size"),color:e.color,left:b+e.left+l,top:e.top+h,height:e_height,lineHeight:e_height+"px",textAlign:"left",pointerEvents:"none"}).data("jq_watermark_element",g);c.watermarker.checkVal(g.val(),k);k.click(function(){c(c(this).data("jq_watermark_element")).trigger("click").trigger("focus")});g.before(k).bind("focus.jq_watermark",function(){if(!c.watermarker.checkVal(c(this).val(),k)){k.stop().fadeTo(e.animDuration,e.minOpacity)}}).bind("blur.jq_watermark change.jq_watermark",function(){if(!c.watermarker.checkVal(c(this).val(),k)){k.stop().fadeTo(e.animDuration,1)}}).on("input.jq_watermark",function(r){c(k).hide()}).bind("keyup.jq_watermark",function(r){c.watermarker.checkVal(c(this).val(),k)})});return this};c.fn.listenForChange=function(d){settings=c.extend({interval:200},d);var e=this;var f=null;e.focus(function(){f=this}).blur(function(){f=null});setInterval(function(){e.each(function(){if(c(this).data("change_listener")==undefined){c(this).data("change_listener",c(this).val());return}if(c(this).data("change_listener")==c(this).val()){return}if(this==f){return}c(this).trigger("change");c(this).data("change_listener",c(this).val())})},settings.interval);return this}})(jQuery);
